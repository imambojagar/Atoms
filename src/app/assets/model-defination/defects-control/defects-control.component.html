<p-toast></p-toast>
<!-- <div class="card flex justify-content-center mb-5">
  <p-breadcrumb [model]="items"></p-breadcrumb>
</div> -->
<div class="container">
  <p-dialog
    header="Add New Defect"
    [(visible)]="displayAdd"
    (onHide)="onHideDialog()"
    [modal]="true"
    [style]="{ width: '50vw' }"
    [maximizable]="true"
    [draggable]="false"
    [resizable]="false"
  >
    <form [formGroup]="defectsForm">
      <label>Add Defect</label>
      <div>
        <input
          formControlName="name"
          type="text"
          pInputText
          [required]="true"
        />
      </div>
    </form>
    <ng-template pTemplate="footer">
      <p-button
        icon="pi pi-check"
        (click)="onAdd()"
        label="Add"
        styleClass="p-button-text"
      ></p-button>
      <p-button
        icon="pi pi-times"
        (click)="displayAdd = false"
        label="Cancel"
        styleClass="p-button-text"
      ></p-button>
    </ng-template>
  </p-dialog>

  <p-dialog
    header="Update Defect"
    [(visible)]="displayUpdate"
    (onHide)="onHideDialog()"
    [modal]="true"
    [style]="{ width: '40vw' }"
    [maximizable]="true"
    [draggable]="false"
    [resizable]="false"
  >
    <form [formGroup]="defectsForm">
      <label>Update Defect</label>
      <input formControlName="name" type="text" pInputText />
    </form>
    <ng-template pTemplate="footer">
      <p-button
        icon="pi pi-check"
        (click)="onUpdate()"
        label="Update"
        styleClass="p-button-text"
      ></p-button>
      <p-button
        icon="pi pi-times"
        (click)="displayUpdate = false"
        label="Cancel"
        styleClass="p-button-text"
      ></p-button>
    </ng-template>
  </p-dialog>

  <div class="view-name-def-header card">
    <!-- ================== -->

    <p-table
      #dt
      [value]="defectsList"
      [rows]="10"
      [paginator]="true"
      [rowHover]="true"
      dataKey="id"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [showCurrentPageReport]="true"
      sortMode="multiple"
      [lazy]="true"
      [totalRecords]="totalRows"
      [tableStyle]="{ width: 'max-content' }"
    >
      <ng-template pTemplate="caption">
        <div class="row">
          <div class="col-lg-6 col-md-12 col-sm-12 col-12">
            <h4 class="mt-3 inline main-heading">
              odel Definition Defects Control Table
            </h4>
          </div>
          <div class="col-lg-6 col-md-12 col-sm-12 col-12 text-right">
            <div class="p-input-icon-left float-end">
              <button
                class="btn btn-blue text-white border-0 p-4"
                (click)="showAddDialog()"
              >
                Add Defect
              </button>
            </div>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th>Defect Name</th>
          <th>Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-Defect>
        <tr>
          <td>{{ Defect.name }}</td>
          <td class="pb-2">
            <button
              (click)="showUpdateDialog(Defect.id)"
              (click)="defectId = Defect.id"
              pButton
              pRipple
              icon="pi pi-pencil"
              class="p-button-rounded btn btn-primary me-2"
            ></button>
            <button
              pButton
              (click)="onDelete(Defect)"
              pRipple
              icon="pi pi-trash"
              class="p-button-rounded btn btn-danger"
            ></button>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <!-- ================== -->
  </div>
</div>
<p-confirmDialog [style]="{ width: '600px' }"></p-confirmDialog>

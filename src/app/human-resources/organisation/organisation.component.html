<div class="atoms-workorder">
  <div class="row">
    <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
      <div class="m-2 qipsa-content-bg">
        <div class="custom-card ">
          <div class="row bd-highlight mt-2">
            <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12 flex-grow-1 bd-highlight mt-4">
                <div class="d-flex">
                  <h5 class="card-title">Organisation</h5>
                  <div class="addlink ps-4 mt-3">
                    <!-- <input id="upload" class="upload-file" type="file"> -->
                    <a id="upload_link" class="color-secondary addlink" (click)="exportOrganisationaData()">Export
                      <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.6134 1.38477H7.38477V2.762H8.78369V3.69938H7.38477V4.61554H8.76938V5.53861H7.38477V6.46169H8.76938V7.38477H7.38477V8.30784H8.76938V9.23092H7.38477V10.6155H11.6134C11.8262 10.6155 12.0002 10.4351 12.0002 10.214V1.7863C12.0002 1.56523 11.8262 1.38477 11.6134 1.38477ZM11.0771 9.23092H9.23092V8.30784H11.0771V9.23092ZM11.0771 7.38477H9.23092V6.46169H11.0771V7.38477ZM11.0771 5.53861H9.23092V4.61554H11.0771V5.53861ZM11.0771 3.69246H9.23092V2.76938H11.0771V3.69246Z" fill="#4A8DB7"/>
                        <path d="M0 1.33338V10.6671L6.92308 12V0L0 1.33338ZM4.37908 8.34461L3.57369 6.822C3.54323 6.76523 3.51185 6.66092 3.47908 6.50908H3.46662C3.45138 6.58062 3.41538 6.68954 3.35862 6.83538L2.55046 8.34461H1.29554L2.78538 6.00738L1.42246 3.66969H2.70369L3.372 5.07138C3.42415 5.18215 3.47077 5.31369 3.51231 5.46554H3.52523C3.55154 5.37415 3.60046 5.23846 3.672 5.058L4.41508 3.66923H5.58831L4.18661 5.98708L5.62754 8.34415L4.37908 8.34461Z" fill="#4A8DB7"/>
                        </svg>
                    </a>
                  </div>
              </div>
            </div>
            <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
              <div class="float-end pb-4 pt-4">
                <!-- <ng-template #popContent>Hello, <b>{{name}}</b>!</ng-template> -->

                <button color="primary" class="round-button">
                  <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.3173 13.0881C16.2148 11.7491 16.7392 10.1379 16.7392 8.40591C16.7392 3.77089 12.9846 0 8.36958 0C3.75457 0 0 3.77089 0 8.40587C0 13.0408 3.75461 16.8118 8.36963 16.8118C10.1282 16.8118 11.7614 16.2638 13.1099 15.3296L19.7804 22L22 19.7708L15.3173 13.0881ZM8.36963 14.4508C5.05815 14.4508 2.36397 11.745 2.36397 8.41911C2.36397 5.09329 5.05811 2.38747 8.36963 2.38747C11.6811 2.38747 14.3753 5.09329 14.3753 8.41916C14.3753 11.745 11.6811 14.4508 8.36963 14.4508Z" fill="#767676"/>
                    </svg>
                </button>
                <button class="text-white new-button-success ms-4" (click)="drawer.toggle()">
                  Add New Organisation
                </button>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="qipsa-section-bg p-2 mt-2">
                  <div class="chapter-inner-box p-1 mb-2">
                    <table mat-table [dataSource]="dataSource" class="table-responsive">

                      <!-- Position Column -->
                      <ng-container matColumnDef="organisationame">
                        <th mat-header-cell *matHeaderCellDef> Organisation Name </th>
                        <td mat-cell *matCellDef="let element"> {{element.organisationame}} </td>
                      </ng-container>

                      <!-- Name Column -->
                      <ng-container matColumnDef="organisationcode">
                        <th mat-header-cell *matHeaderCellDef> Organisation Code </th>
                        <td mat-cell *matCellDef="let element">
                           {{element.organisationcode}}
                          </td>
                      </ng-container>

                      <ng-container matColumnDef="postalcode">
                        <th mat-header-cell *matHeaderCellDef> Postal Code </th>
                        <td mat-cell *matCellDef="let element"> {{element.postalcode}} </td>
                      </ng-container>

                      <ng-container matColumnDef="fromdate">
                        <th mat-header-cell *matHeaderCellDef> From Date </th>
                        <td mat-cell *matCellDef="let element"> {{element.fromdate}} </td>
                      </ng-container>

                      <ng-container matColumnDef="todate">
                        <th mat-header-cell *matHeaderCellDef> To Date </th>
                        <td mat-cell *matCellDef="let element"> {{element.todate}} </td>
                      </ng-container>

                      <ng-container matColumnDef="location">
                        <th mat-header-cell *matHeaderCellDef> Location </th>
                        <td mat-cell *matCellDef="let element"> {{element.location}} </td>
                      </ng-container>

                      <ng-container matColumnDef="city">
                        <th mat-header-cell *matHeaderCellDef> City </th>
                        <td mat-cell *matCellDef="let element">
                          {{element.city}}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="country">
                        <th mat-header-cell *matHeaderCellDef> Country </th>
                        <td mat-cell *matCellDef="let element"> {{element.country}} </td>
                      </ng-container>

                      <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef>Actions</th>
                        <td mat-cell *matCellDef="let element">
                          <button color="primary" class="edit_round_button me-4">
                            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <g opacity="0.5">
                              <path d="M12.5703 13.9872C12.3589 14.1985 12.0976 14.3599 11.8145 14.4543L9.07994 15.3658C8.88258 15.4316 8.67676 15.465 8.46853 15.465C7.95201 15.465 7.46642 15.2639 7.10123 14.8987C6.57997 14.3773 6.40105 13.6192 6.63416 12.9199L7.54569 10.1855C7.64001 9.90227 7.80157 9.64085 8.01277 9.42966L13.919 3.52344H2.36328C1.06017 3.52344 0 4.5836 0 5.88672V19.6367C0 20.9398 1.06017 22 2.36328 22H16.1133C17.4164 22 18.4766 20.9398 18.4766 19.6367V8.08096L12.5703 13.9872Z" fill="#163A51"/>
                              <path d="M8.92453 10.3407C8.85376 10.4114 8.80048 10.4977 8.76886 10.5926L7.85732 13.3271C7.7801 13.5587 7.84039 13.814 8.013 13.9867C8.18564 14.1593 8.44096 14.2196 8.67256 14.1423L11.4071 13.2308C11.5021 13.1992 11.5883 13.1459 11.659 13.0752L19.7107 5.02355L16.9762 2.28906L8.92453 10.3407Z" fill="#163A51"/>
                              <path d="M20.4693 0.314628C20.0498 -0.104876 19.3697 -0.104876 18.9502 0.314628L17.8867 1.37806L20.6212 4.11259L21.6847 3.04916C22.1042 2.62965 22.1042 1.9495 21.6847 1.53L20.4693 0.314628Z" fill="#163A51"/>
                              </g>
                            </svg>
                          </button>
                          <button color="primary" class="edit_round_button">
                            <svg width="20" height="22" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M1.3418 6.44531L2.48336 20.226C2.56517 21.2198 3.41168 21.999 4.40927 21.999H14.9276C15.9251 21.999 16.7717 21.2198 16.8535 20.226L17.995 6.44531H1.3418ZM6.44534 19.421C6.10797 19.421 5.82414 19.1586 5.80274 18.8168L5.15825 8.41904C5.13621 8.06345 5.40621 7.75758 5.76119 7.73554C6.12937 7.70972 6.42205 7.98289 6.4447 8.33848L7.08919 18.7363C7.112 19.1045 6.82065 19.421 6.44534 19.421ZM10.3129 18.7766C10.3129 19.1328 10.0246 19.421 9.66839 19.421C9.31216 19.421 9.0239 19.1328 9.0239 18.7766V8.37878C9.0239 8.02255 9.31216 7.73429 9.66839 7.73429C10.0246 7.73429 10.3129 8.02255 10.3129 8.37878V18.7766ZM14.1785 8.41908L13.534 18.8169C13.5129 19.1552 13.2309 19.4371 12.8505 19.4198C12.4956 19.3978 12.2256 19.0919 12.2476 18.7363L12.8921 8.33852C12.9141 7.98294 13.2257 7.72424 13.5756 7.73558C13.9306 7.75762 14.2006 8.0635 14.1785 8.41908Z" fill="#D02127"/>
                              <path d="M18.0457 2.57796H14.1788V1.93347C14.1788 0.867312 13.3115 0 12.2453 0H7.08939C6.02323 0 5.15592 0.867312 5.15592 1.93347V2.57796H1.28898C0.577076 2.57796 0 3.15504 0 3.86694C0 4.57876 0.577076 5.15592 1.28898 5.15592C7.21683 5.15592 12.1181 5.15592 18.0457 5.15592C18.7576 5.15592 19.3347 4.57876 19.3347 3.86694C19.3347 3.15504 18.7576 2.57796 18.0457 2.57796ZM12.8898 2.57796H6.4449V1.93347C6.4449 1.57788 6.7338 1.28898 7.08939 1.28898H12.2453C12.6009 1.28898 12.8898 1.57788 12.8898 1.93347V2.57796Z" fill="#D02127"/>
                            </svg>
                          </button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                  </div>
              </div>
                <div class="mt-4">
                  <div class="d-md-inline-flex pull-right">
                    <div class="pagination-label">
                      <label>Showing 1 to {{recordsperPage}} of {{numbeOfRecords}} entries</label>
                    </div>
                    <mat-paginator
                      #paginator
                      appBubblePagination
                      [appCustomLength]="numbeOfRecords"
                      [pageSize]="recordsperPage"
                      [pageSizeOptions]="pageSizeOptions"
                      [length]="numbeOfRecords" >
                    </mat-paginator>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<mat-drawer #drawer class="add-new-sidenav" mode="over" position="end">
  <div class="flex flex-column h-full search-sa-sidebar">
  <!-- <div class="offcanvas offcanvas-end fade" tabindex="-1" id="offcanvasRightOrganisation" aria-mat-labelledby="offcanvasRightmat-label"> -->
    <div class="offcanvas-mat-header me-1">
      <h5 id="offcanvasRightmat-label" class="offcanvas-mat-label pull-left mb-4">Add New Organisation</h5>
      <button  class="btn-close text-reset pull-right mt-2"  (click)="drawer.toggle()" ></button>
    </div>
    <div class="body">
      <form>
      <div class="col-md-12 col-sm-12">
        <mat-form-field appearance="fill">
          <mat-label for="organisationName">Organisation Name</mat-label>
          <input matInput [formControl]="organisationame" class="form-control" id="organisationName">
        </mat-form-field>
        <!-- <div class="form-floating d-flex mb-3">
          <input type="text" class="form-control  border  input-field" id="organisationName"
              value="1234">
              value="ORG-7"
              value="12333"
              value="KSA"
          <mat-label for="organisationName">Organisation Name</mat-label>
        </div> -->
      </div>
      <div class="col-md-12 col-sm-12">
        <mat-form-field appearance="fill">
          <mat-label for="organisationCode">Organisation Code</mat-label>
          <input matInput [formControl]="organisationCode" class="form-control" id="organisationCode">
        </mat-form-field>
      </div>
      <div class="col-md-12 col-sm-12">
        <mat-form-field appearance="fill">
          <mat-label for="postalCode">Postal Code</mat-label>
          <input matInput [formControl]="postalCode" class="form-control" id="postalCode">
        </mat-form-field>
      </div>
      <div class="col-md-12 col-sm-12">
        <mat-form-field appearance="fill">
          <mat-label for="location">Location</mat-label>
          <input matInput [formControl]="location" class="form-control" id="location">
        </mat-form-field>
      </div>
      <div class="col-md-12 col-sm-12">
        <mat-form-field appearance="fill">
          <mat-label for="city">City</mat-label>
          <mat-select color="secondary" class="my-custom-class" id="city" [formControl]="selectedCities" >

            <input  color="secondary" class=" form-control mat-select-input-control" placeholder="Search city" (keyup)="onKeyCities($event)" >
            <!-- <div class="form-floating mb-1">
              <input #appFocus id="ci" class="form-control mat-select-input-control"   (keyup)="onKeyCities($event)">
              <mat-label for="ci" class="ms-2">Search city</mat-label>
            </div> -->

            <!-- @for (selectcity of selectedItemsCities; track $index) { -->
              <mat-option *ngFor="let selectcity of selectedItemsCities;"  [value]="selectcity.id">{{selectcity.name}}</mat-option>
          <!--   } -->
          </mat-select>
          <!-- <mat-hint>Errors appear instantly!</mat-hint> -->
        <!--   @if (selectedCities.hasError('required')) {
            <mat-error>You must make a selection</mat-error>
          }
          @if (selectedCities.hasError('pattern') && !selectedCities.hasError('required')) {
            <mat-error>Your selection is invalid</mat-error>
          } -->
        </mat-form-field>
      </div>
      <div class="col-md-12 col-sm-12">
        <mat-form-field appearance="fill">
          <mat-label for="countries">Country</mat-label>
          <mat-select color="secondary" class="my-custom-class" id="countries" [formControl]="selectedCountries"  [errorStateMatcher]="matcher">
             <input    #appFocuss class="form-control mat-select-input-control" id="ct"  placeholder="Search Country"  (keyup)="onKeyCountries($event)">

            <!--  @for (selectitem of selectedItemsCountries; track $index) { -->
              <mat-option *ngFor="let selectcountry of selectedItemsCountries;" [value]="selectcountry.id">{{selectcountry.name}}</mat-option>
            <!-- } -->
          </mat-select>
          <!-- <mat-hint>Errors appear instantly!</mat-hint> -->
        <!--  @if (selectedCountries.hasError('required')) {
            <mat-error>You must make a selection</mat-error>
          }
          @if (selectedCountries.hasError('pattern') && !selectedCountries.hasError('required')) {
            <mat-error>Your selection is invalid</mat-error>
          } -->
        </mat-form-field>
      </div>
      <div class="col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>From Date</mat-label>
          <input matInput [matDatepicker]="picker">
          <mat-datepicker-toggle matIconSuffix [for]="picker">
          </mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col-md-12 col-sm-12">
        <mat-form-field>
          <mat-label>To Date</mat-label>
          <input matInput [matDatepicker]="picker2">
          <mat-datepicker-toggle matIconSuffix [for]="picker2">
          </mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
      </div>
      </form>
    </div>
    <div class="mt-auto footer">
      <div class="ms-4">
        <button class="atoms-button-danger m-2 " type="button" (click)="drawer.toggle()">
          Cancel
        </button>
        <button  class="text-white atoms-button-success m-2" type="button">
          <span class="text-light">
            Add
          </span>
        </button>
      </div>
    </div>
  </div>
</mat-drawer>


